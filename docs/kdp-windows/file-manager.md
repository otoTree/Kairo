# 文件管理器窗口规范

## 概述

Kairo 文件管理器通过 KDP 协议渲染，提供文件浏览、预览和基本操作功能。
采用双栏布局（侧边栏 + 内容区），风格简洁克制。

---

## 窗口布局

```
┌──────────────────────────────────────────────────────┐
│  kairo-files: ~/Documents              [─] [□] [×]   │  ← 标题栏
├──────────┬───────────────────────────────────────────┤
│ 收藏夹    │  [← →]  ~/Documents    [搜索...]  [≡ ⊞]  │  ← 导航栏
│  ├ 主目录  ├───────────────────────────────────────────┤
│  ├ 桌面    │                                           │
│  ├ 文档    │  ┌──────┐  ┌──────┐  ┌──────┐            │
│  ├ 下载    │  │ 📄   │  │ 📁   │  │ 📄   │            │
│  │        │  │report │  │images│  │notes │            │
│  │ 设备    │  │.md    │  │      │  │.txt  │            │
│  ├ 本地磁盘│  └──────┘  └──────┘  └──────┘            │
│  │        │                                           │
│  │ 标签    │  ┌──────┐  ┌──────┐                      │
│  ├ 工作    │  │ 📄   │  │ 📦   │                      │
│  ├ 个人    │  │config│  │backup│                      │
│  │        │  │.toml  │  │.tar  │                      │
│           │  └──────┘  └──────┘                      │
├──────────┴───────────────────────────────────────────┤
│  6 个项目  可用空间: 12.4 GB                           │  ← 状态栏
└──────────────────────────────────────────────────────┘
```

---

## 组件详解

### 标题栏（36px）

```
背景色:    Surface (#16161E, 0.95)
左侧:     窗口标题 "kairo-files: [当前路径]"
右侧:     窗口控制按钮组
```

### 导航栏（32px）

```
背景色:    Surface (#16161E) 与标题栏融合
左侧:
  [← →]        前进/后退按钮，16×16px 图标
                禁用态 Tertiary 色，可用态 Primary 色
中间:
  路径面包屑    "~" / "Documents" / "projects"
                可点击每一级，Secondary 色分隔符 "/"
                当前级 Primary 色，上级 Secondary 色
右侧:
  搜索框        圆角输入框（4px radius），宽度 180px
                占位符 "搜索..." Tertiary 色
  视图切换      [≡ 列表] [⊞ 网格] 图标按钮
                活跃视图 Kairo Blue，非活跃 Secondary
```

### 侧边栏（220px 宽）

```
背景色:    Elevated (#1E1E2A, 0.92)
右边框:    1px Border 色

分组标题:  Caption 字号，Secondary 色，大写
          上方间距 xl (24px)，下方间距 sm (8px)

项目样式:
  高度:      28px
  内边距:    左 12px（含 16px 图标 + 8px 间距）
  圆角:      sm (4px)
  默认:      透明背景，Primary 文字色
  Hover:     Overlay 背景色
  选中:      Kairo Blue 15% 透明度背景，Kairo Blue 文字色

分组:
  收藏夹     主目录 / 桌面 / 文档 / 下载 / 图片 / 音乐
  设备       本地磁盘 / 外部设备（动态）
  标签       用户自定义标签（彩色圆点标识）
```

### 内容区

#### 网格视图（默认）

```
背景色:    Base (#0D0D12)
内边距:    lg (16px)

文件项:
  尺寸:      80×96px（图标 48px + 文字区 48px）
  间距:      md (12px)
  图标:      48×48px，Phosphor Icons
  文件名:    Caption 字号，居中，最多 2 行
  选中态:    Kairo Blue 15% 背景，圆角 sm
  拖拽态:    50% 透明度 + 微偏移

文件夹图标色:  Kairo Blue
文档图标色:    Secondary
图片缩略图:    实际缩略图（如 KDP 支持图片节点）
```

#### 列表视图

```
列定义:
  名称       flex: 1，左对齐，带图标（20×20px）
  大小       80px，右对齐
  修改日期   160px，左对齐
  类型       100px，左对齐

行高:        32px
分隔线:      Divider 色，1px
排序指示:    列标题右侧 ▲/▼，Kairo Blue 色
交替行背景:  无（纯色背景更干净）
Hover 行:    Overlay 背景色
```

### 状态栏（28px）

```
背景色:    Surface (#16161E, 0.95)
左侧:     "[N] 个项目" | 选中时 "已选择 [M] 项"
右侧:     "可用空间: [X] GB"
字号:      Caption (12px)
文字色:    Secondary
```

---

## 功能特性

### 文件操作

| 操作 | 触发方式 | 说明 |
|------|---------|------|
| 打开 | 双击 / Enter | 文件夹进入，文件用默认程序打开 |
| 重命名 | F2 / 慢速双击 | 内联编辑，Enter 确认，Esc 取消 |
| 删除 | Delete / Backspace | 确认对话框，支持移至回收站 |
| 复制 | Ctrl+C | 复制到剪贴板 |
| 粘贴 | Ctrl+V | 粘贴到当前目录 |
| 新建文件夹 | Ctrl+Shift+N | 内联创建并进入重命名态 |
| 全选 | Ctrl+A | 选中当前目录所有项目 |

### 右键菜单

```
┌──────────────────┐
│ 打开              │
│ 在终端中打开       │
│ ──────────────── │
│ 复制              │
│ 剪切              │
│ 粘贴              │
│ ──────────────── │
│ 重命名            │
│ 移至回收站         │
│ ──────────────── │
│ 属性              │
└──────────────────┘

样式:
  背景:    Elevated (#1E1E2A, 0.95)
  边框:    1px Border 色
  圆角:    md (8px)
  阴影:    lg 级别
  项目高度: 28px
  分隔线:   Divider 色
```

### Agent 集成

文件管理器与 Agent 的交互：

```
Agent 可通过 Kernel 事件触发:
  - 打开指定目录
  - 高亮特定文件（Kairo Blue 脉冲边框动画）
  - 在状态栏显示 Agent 操作提示
  - 批量文件操作（复制/移动/删除）的进度显示
```
